{"version":3,"file":"tetris.min.js","sources":["../js/tetris.js"],"names":["angular","module","run","$rootScope","$translate","$log","realTimeService","randomService","createCanvasController","canvas","createBoard","newBoard","y","rowsNum","x","colsNum","gotStartMatch","params","isHelpModalShown","fpsmeter","window","FPSMeter","graph","theme","left","yourPlayerIndex","playersInfo","matchController","isSinglePlayer","length","isSinglePlayerGlobal","totalPauseTime","pauseStartTime","pieceCreatedNum","allScores","allBoards","index","board","createPiece","startMatchTime","Date","getTime","stopCountDownInterval","countDownInterval","requestAnimationFrame","drawCountDown","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","s","b","gotEndMatch","endMatchScores","isGameOngoing","stopDrawInterval","sendMessage","isReliable","toJson","p","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","randomFromTo","shapes","temp","shape","i","piece","valid","offsetX","offsetY","newShape","tick","freeze","clearLines","setDrawInterval","rowFilled","yy","xx","rotate","copy","intervalMillis","Math","max","drawEveryMilliseconds","floor","cancelAnimationFrame","drawInterval","drawCell","color","ctx","fillStyle","fillRect","cellWidth","cellHeight","strokeStyle","strokeRect","draw","canvasWidth","canvasHeight","font","playerColor","textBaseline","msg","toUpperCase","score","cordX","cordY","fillText","shapeColor","tickStart","secondsFromStart","secondsToReallyStart","yourColor","updateAndDraw","timestamp","startTime","timelapse","keyPressed","dir","rotated","processKey","e","key","which","processTouch","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","info","id","getContext","document","addEventListener","carouselClick","carouselClose","init"],"mappings":"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"}