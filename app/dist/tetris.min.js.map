{"version":3,"file":"tetris.min.js","sources":["../js/tetris.js"],"names":["angular","module","run","$translate","$log","realTimeService","randomService","createCanvasController","canvas","init","y","rowsNum","board","x","colsNum","gotStartMatch","params","fpsmeter","window","FPSMeter","graph","theme","left","yourPlayerIndex","playersInfo","matchController","isSinglePlayer","length","pieceCreatedNum","allScores","index","createPiece","startMatchTime","Date","getTime","stopCountDownInterval","countDownInterval","requestAnimationFrame","drawCountDown","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","s","gotEndMatch","endMatchScores","stopDrawInterval","isGameOngoing","sendMessage","isReliable","toJson","p","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","randomFromTo","shapes","temp","shape","i","piece","valid","offsetX","offsetY","newShape","tick","freeze","clearLines","setDrawInterval","rowFilled","yy","xx","rotate","copy","intervalMillis","Math","max","drawEveryMilliseconds","floor","cancelAnimationFrame","drawInterval","drawCell","color","ctx","fillStyle","fillRect","cellWidth","cellHeight","strokeStyle","strokeRect","draw","canvasWidth","canvasHeight","font","playerColor","textBaseline","msg","toUpperCase","score","cordX","cordY","fillText","shapeColor","tickStart","secondsFromStart","secondsToReallyStart","yourColor","updateAndDraw","timestamp","startTime","timelapse","keyPressed","dir","rotated","processKey","e","key","which","processTouch","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","info","id","getContext","document","addEventListener"],"mappings":"AAAAA,QAAQC,OAAO,YACZC,KAAK,aAAc,OAAQ,kBAAmB,gBAC3C,SAAUC,EAAYC,EAAMC,EAAiBC,GACnD,YAsBA,SAASC,GAAuBC,GAwC9B,QAASC,KACP,IAAK,GAAIC,GAAI,EAAOC,EAAJD,IAAeA,EAAG,CAChCE,EAAMF,KACN,KAAK,GAAIG,GAAI,EAAOC,EAAJD,IAAeA,EAC7BD,EAAMF,GAAGG,GAAK,GAOpB,QAASE,GAAcC,GACrBC,EAAW,GAAIC,QAAOC,UAAUC,OAAO,EAAMC,MAAO,OAAQC,KAAM,QAClEC,EAAkBP,EAAOO,gBACzBC,EAAcR,EAAOQ,YACrBC,EAAkBT,EAAOS,gBAEzBC,EAAwC,IAAvBF,EAAYG,OAE7BC,EAAkB,EAClBC,IACA,KAAK,GAAIC,GAAQ,EAAGA,EAAQN,EAAYG,OAAQG,IAC9CD,EAAUC,GAAS,CAErBrB,KACAsB,IACAC,GAAiB,GAAIC,OAAOC,UAC5BC,IACAC,EAAoBC,sBAAsBC,GAI5C,QAASC,GAAWvB,GAClB,GAAIwB,GAAkBxB,EAAOwB,gBACzBC,EAAgBzB,EAAO0B,QAEvBC,EAAgB3C,QAAQ4C,SAASH,EACrCZ,GAAUW,GAAmBG,EAAcE,EAM7C,QAASC,GAAYC,GAEnBC,IACAnB,EAAYkB,EACZE,GAAgB,EAGlB,QAASC,GAAYC,GACnB,IAAIzB,GAAmBuB,EAAvB,CAGA,GAAIR,GAAgBzC,QAAQoD,QACvBC,EAAGzB,EAAiBiB,EAAGhB,EAAUN,IAClC4B,GACF1B,EAAgB6B,oBAAoBb,GAEpChB,EAAgB8B,sBAAsBd,IAI1C,QAASe,KACFP,IAGLA,GAAgB,EAChBxB,EAAgBgC,SAAS5B,IAI3B,QAASE,KAKP,IAAK,GAJDD,GAAQxB,EAAcoD,aAA+B,EAAlB9B,EAAqB,EAAG+B,EAAOhC,QAClEiC,EAAOD,EAAO7B,GACd+B,KAEKnD,EAAI,EAAO,EAAJA,IAASA,EAAG,CAC1BmD,EAAMnD,KACN,KAAK,GAAIG,GAAI,EAAO,EAAJA,IAASA,EAAG,CAC1B,GAAIiD,GAAI,EAAIpD,EAAIG,CAEdgD,GAAMnD,GAAGG,GADY,mBAAZ+C,GAAKE,IAAsBF,EAAKE,GAC3B,EAEA,GAKpBC,EAAMF,MAAQA,EACdE,EAAMlD,EAAI,EACVkD,EAAMrD,EAAc,IAAVoB,EAAc,GAAK,EAC7BiC,EAAMjC,MAAQA,EAEdF,IAKF,QAASoC,GAAMC,EAASC,EAASC,GAC/BF,EAAUA,GAAW,EACrBC,EAAUA,GAAW,EACrBD,EAAUF,EAAMlD,EAAIoD,EACpBC,EAAUH,EAAMrD,EAAIwD,EACpBC,EAAWA,GAAYJ,EAAMF,KAG7B,KAAK,GAFD/B,GAAQiC,EAAMjC,MAETpB,EAAI,EAAO,EAAJA,IAASA,EACvB,IAAK,GAAIG,GAAI,EAAO,EAAJA,IAASA,EACvB,GAAIsD,EAASzD,GAAGG,GAAI,CAClB,GAAkC,mBAAvBD,GAAMF,EAAIwD,IAC0B,mBAApCtD,GAAMF,EAAIwD,GAASrD,EAAIoD,GAChC,OAAO,CAEP,IAAIrD,EAAMF,EAAIwD,GAASrD,EAAIoD,GAIzB,OAHc,IAAVnC,GAA2B,IAAZoC,GAA0B,IAATpC,GAA0B,IAAZoC,IAChDV,KAEK,EAMjB,OAAO,EAGT,QAASY,KACP,GAAIJ,EAAM,EAAG,KACTD,EAAMrD,MACH,CACL,IAAIuC,EACF,MAEFoB,KACAC,IACAvC,IACAoB,GAAa,EACboB,KAKJ,QAASF,KACP,IAAK,GAAI3D,GAAI,EAAO,EAAJA,IAASA,EACvB,IAAK,GAAIG,GAAI,EAAO,EAAJA,IAASA,EACnBkD,EAAMF,MAAMnD,GAAGG,KACjBD,EAAMF,EAAIqD,EAAMrD,GAAGG,EAAIkD,EAAMlD,GAAKkD,EAAMF,MAAMnD,GAAGG,IAOzD,QAASyD,KACP,IAAK,GAAI5D,GAAIC,EAAU,EAAGD,GAAK,IAAKA,EAAG,CAErC,IAAM,GADF8D,IAAY,EACN3D,EAAI,EAAOC,EAAJD,IAAeA,EAC9B,GAAoB,IAAhBD,EAAMF,GAAGG,GAAU,CACrB2D,GAAY,CACZ,OAGJ,GAAIA,EAAW,CACb3C,EAAUN,IACV,KAAK,GAAIkD,GAAK/D,EAAG+D,EAAK,IAAKA,EACzB,IAAK,GAAIC,GAAK,EAAQ5D,EAAL4D,IAAgBA,EAC/B9D,EAAM6D,GAAIC,GAAM9D,EAAM6D,EAAK,GAAGC,KAGhChE,IAMR,QAASiE,GAAOd,EAAO/B,GACrB,GAAc,IAAVA,EACF,MAAO9B,SAAQ4E,KAAKf,EAEtB,IACIhD,GAAGH,EADHyD,IAEJ,IAAc,IAAVrC,EACF,IAAKpB,EAAI,EAAO,EAAJA,IAASA,EAEnB,IADAyD,EAASzD,MACJG,EAAI,EAAO,EAAJA,IAASA,EACnBsD,EAASzD,GAAGG,GAAKgD,EAAM,EAAIhD,GAAGH,OAIlC,KAAKA,EAAI,EAAO,EAAJA,IAASA,EAEnB,IADAyD,EAASzD,MACJG,EAAI,EAAO,EAAJA,IAASA,EACnBsD,EAASzD,GAAGG,GAAKgD,EAAM,EAAIhD,GAAGH,EAIpC,OAAOyD,GAUT,QAASI,KAGPM,EAAiBC,KAAKC,IAAI,IAAKC,EAAwB,GAAKF,KAAKG,MAAMrD,EAAkB,KAI3F,QAASoB,KACPkC,qBAAqBC,GAGvB,QAAShD,KACP+C,qBAAqB9C,GAIvB,QAASgD,GAASvE,EAAGH,EAAG2E,GACtBC,EAAIC,UAAYF,EAChBC,EAAIE,SAAS3E,EAAE4E,EAAW/E,EAAEgF,EAAYD,EAAU,EAAGC,EAAW,GAChEJ,EAAIK,YAAc,QAClBL,EAAIM,WAAW/E,EAAE4E,EAAW/E,EAAEgF,EAAYD,EAAU,EAAGC,EAAW,GAGpE,QAASG,KAEPP,EAAIC,UAAY,QAChBD,EAAIE,SAAS,EAAG,EAAGM,EAAaC,GAChCT,EAAIK,YAAc,QAClBL,EAAIM,WAAW,EAAG,EAAGE,EAAaC,EAGlC,KAAK,GAAIjC,GAAI,EAAGA,EAAIjC,EAAUF,OAAQmC,IAAK,CACzCwB,EAAIU,KAAO,iBACX,IAAIX,GAAQY,EAAYnC,EACxBwB,GAAIC,UAAYF,EAChBC,EAAIY,aAAe,KACnB,IAAIC,GAAMhG,EAAW,kBAChBkF,MAAOlF,EAAWkF,EAAMe,eAAgBC,MAAO,GAAKxE,EAAUiC,KAC/DwC,EAAQ,EAAIxC,EAAI,EAAIgC,GAAetE,EAAYG,OAAS,EAAI,EAAIH,EAAYG,QAC5E4E,EAAQ,EAAwB,GAApBzB,KAAKG,MAAMnB,EAAI,EAC/BwB,GAAIkB,SAASL,EAAKG,EAAOC,GAG3B,GAAI1F,GAAGH,CAEP,KAAKG,EAAI,EAAOC,EAAJD,IAAeA,EACzB,IAAKH,EAAI,EAAOC,EAAJD,IAAeA,EACrBE,EAAMF,GAAGG,IACXuE,EAASvE,EAAGH,EAAGuF,EAAY1E,GAMjC,KAAKb,EAAI,EAAO,EAAJA,IAASA,EACnB,IAAKG,EAAI,EAAO,EAAJA,IAASA,EACfkD,EAAMF,MAAMnD,GAAGG,IACjBuE,EAASrB,EAAMlD,EAAIA,EAAGkD,EAAMrD,EAAIA,EAAG+F,EAAW1C,EAAMjC,QAO5D,QAASQ,KACPrB,EAASyF,WACT,IAAIC,GACF7B,KAAKG,QAAO,GAAIhD,OAAOC,UAAYF,GAAkB,IACvD,IAAuB,EAAnB2E,EAAsB,CAExBd,GAEA,IAAIe,GAAuB,EAAID,EAG3BE,EAAYZ,EAAY1E,EAC5B+D,GAAIC,UAAYsB,EAChBvB,EAAIU,KAAO,kBACXV,EAAIkB,SAAS,GAAKI,EAAsBd,EAAc,EAAGC,EAAe,GAExET,EAAIU,KAAO,iBACX,IAAIG,GAAMhG,EAAW,uBACrBmF,GAAIkB,SAASL,EAAK,EAAGJ,EAAe,EAAI,IACxCI,EAAMhG,EAAW,cACZkF,MAAOlF,EAAW0G,EAAUT,iBACjCd,EAAIkB,SAASL,EAAKL,EAAc,EAAI,GAAKC,EAAe,EAAI,GAC5D9E,EAASmD,OACThC,EAAqBC,sBAAsBC,OAE3CW,IAAgB,EAChBd,IACAoC,IACAY,EAAe9C,sBAAsByE,GAMzC,QAASA,GAAcC,GAErB,GADA9F,EAASyF,YACJzD,EAAL,CAIgB,EAAZ+D,IACFA,EAAYD,EAGd,IAAIE,GAAYF,EAAYC,CAC5B7D,IAAa,EACT8D,GAAapC,IACfmC,EAAYD,EACZ3C,KAEFlB,EAAYC,GACZ0C,IACA5E,EAASmD,OACTe,EAAe9C,sBAAsByE,IAGvC,QAASI,GAAWC,GAClB,OAAQA,GACN,IAAK,OACCnD,EAAM,OACND,EAAMlD,CAEV,MACF,KAAK,QACCmD,EAAM,MACND,EAAMlD,CAEV,MACF,KAAK,OACCmD,EAAM,EAAG,MACTD,EAAMrD,CAEV,MACF,KAAK,KACH,GAAI0G,GAAUzC,EAAOZ,EAAMF,MAAOE,EAAMjC,MACpCkC,GAAM,EAAG,EAAGoD,KACdrD,EAAMF,MAAQuD,IAOtB,QAASC,GAAWC,GAClB,GAAIC,GAAMD,EAAEE,MACRL,EAAc,KAARI,EAAa,OACT,KAARA,EAAa,KACL,KAARA,EAAa,QACL,KAARA,EAAa,OAAS,IAChB,QAARJ,GAAgBlE,IAClBiE,EAAWC,GACXtB,KAMJ,QAAS4B,GAAaH,GACpB,GAAKrE,EAAL,CAGAqE,EAAEI,gBACF,IAAIC,GAAWL,EAAEM,cAAc,EAC/B,IAAKD,EAAL,CAGA,GAAc,OAAVE,EAGF,MAFAA,GAAQF,EAASG,WACjBC,GAAQJ,EAASK,MAGnB,IAAIC,GAAQN,EAASG,MAAQD,EACzBK,EAAQP,EAASK,MAAQD,GACzBI,EAAW,KACXC,EAAWtD,KAAKuD,IAAIJ,GACpBK,EAAWxD,KAAKuD,IAAIH,IACpBE,GAAY,IAAME,GAAY,MAChCT,EAAQF,EAASG,MACjBC,GAAQJ,EAASK,MAEfG,EADEC,EAAWE,EACM,EAARL,EAAY,OAAS,QAEb,EAARC,EAAY,KAAO,OAEhChB,EAAWiB,GACXtC,OAnbJzF,EAAKmI,KAAK,wCAA0C/H,EAAOgI,GAC3D,IAQI3G,GACAD,EAyBAI,EAEAf,EAWAmB,EAkMA+C,EAjPAlC,GAAgB,EAChBvB,GAAiB,EACjBF,EAAc,KACdD,EAAkB,KAClBE,EAAkB,KAMlBb,KAEAmD,KAIAJ,IAAa,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,IACT,EAAG,EAAG,EAAG,EACT,IACA,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,IACN,EAAG,EAAG,EAAG,EACT,EAAG,IACH,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,IACN,EAAG,EAAG,EAAG,EACT,EAAG,IACH,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,IAEnB8C,GACF,OAAQ,SAAU,OAAQ,SAAU,MAAO,QAAS,UA+MlDnB,EAAM9E,EAAOiI,WAAW,MAGxBzB,EAAY,GACZnC,EAAiBG,EAkGjB7B,GAAa,CA8DjBuF,UAASC,iBAAiB,UAAWtB,GAAY,EAEjD,IAAIQ,GAAQ,KAAME,GAAQ,IA4C1B,OAZAvH,GAAOmI,iBAAiB,aAAc,SAASrB,GAC7CO,EAAQ,KACRE,GAAQ,KACRN,EAAaH,KACZ,GACH9G,EAAOmI,iBAAiB,YAAa,SAASrB,GAC5CG,EAAaH,KACZ,GACH9G,EAAOmI,iBAAiB,WAAY,SAASrB,GAC3CG,EAAaH,KACZ,IAGDvG,cAAeA,EACfwB,WAAYA,EACZO,YAAaA,GAzdjB,GAAIgD,GAAc,IACdC,EAAe,IAGfN,EAAY,GACZC,EAAa,GACb5E,EAAUgF,EAAcL,EACxB9E,EAAUoF,EAAeL,EACzBV,EAAwB,IAMxBiB,GACF,OAAQ,MAAO,QAAS,SACxB,OAAQ,SAAU,SAAU,SA6c9B5F,GAAgBI,MACdF,uBAAwBA,EACxBuF,YAAaA,EACbC,aAAcA"}