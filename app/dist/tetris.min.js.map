{"version":3,"file":"tetris.min.js","sources":["../js/tetris.js"],"names":["angular","module","run","$translate","$log","realTimeService","randomService","createCanvasController","canvas","init","y","rowsNum","board","x","colsNum","gotStartMatch","params","yourPlayerIndex","playersInfo","matchController","isGameOngoing","isSinglePlayer","length","pieceCreatedNum","allScores","index","createPiece","startMatchTime","Date","getTime","setDrawInterval","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","s","p","gotEndMatch","endMatchScores","stopDrawInterval","sendMessage","isReliable","toJson","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","randomFromTo","shapes","temp","shape","i","piece","valid","offsetX","offsetY","newShape","tick","freeze","clearLines","rowFilled","document","getElementById","play","yy","xx","rotate","intervalMillis","Math","max","drawEveryMilliseconds","floor","drawInterval","setInterval","updateAndDraw","clearInterval","drawCell","color","ctx","fillStyle","fillRect","cellWidth","cellHeight","strokeStyle","strokeRect","draw","canvasWidth","canvasHeight","playerColor","shapeColor","font","textBaseline","msg","instant","toUpperCase","score","cordX","cordY","fillText","secondsFromStart","secondsToReallyStart","yourColor","keyPressed","dir","rotated","processTouch","e","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","info","id","getContext","addEventListener","key","which","config","$translateProvider"],"mappings":"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"}