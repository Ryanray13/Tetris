{"version":3,"file":"tetris.min.js","sources":["../js/tetris.js"],"names":["angular","module","run","$window","$translate","$log","realTimeService","randomService","createCanvasController","canvas","init","y","rowsNum","board","x","colsNum","gotStartMatch","params","yourPlayerIndex","playersInfo","matchController","isSinglePlayer","length","pieceCreatedNum","allScores","index","createPiece","startMatchTime","Date","getTime","stopCountDownInterval","countDownInterval","requestAnimationFrame","drawCountDown","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","s","gotEndMatch","endMatchScores","stopDrawInterval","isGameOngoing","sendMessage","isReliable","toJson","p","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","randomFromTo","shapes","temp","shape","i","piece","valid","offsetX","offsetY","newShape","tick","freeze","clearLines","setDrawInterval","rowFilled","yy","xx","rotate","copy","intervalMillis","Math","max","drawEveryMilliseconds","floor","cancelAnimationFrame","drawInterval","drawCell","color","ctx","fillStyle","fillRect","cellWidth","cellHeight","strokeStyle","strokeRect","draw","canvasWidth","canvasHeight","font","playerColor","textBaseline","msg","toUpperCase","score","cordX","cordY","fillText","shapeColor","secondsFromStart","secondsToReallyStart","yourColor","updateAndDraw","timestamp","fpsmeter","tickStart","startTime","timelapse","keyPressed","dir","rotated","processKey","e","key","which","processTouch","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","info","id","FPSMeter","decimals","graph","theme","left","getContext","document","addEventListener"],"mappings":"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"}