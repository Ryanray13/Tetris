{"version":3,"file":"tetris.min.js","sources":["../js/tetris.js"],"names":["angular","module","run","$translate","$log","realTimeService","randomService","createCanvasController","canvas","init","y","rowsNum","board","x","colsNum","gotStartMatch","params","yourPlayerIndex","playersInfo","matchController","isSinglePlayer","length","pieceCreatedNum","allScores","index","createPiece","startMatchTime","Date","getTime","stopCountDownInterval","countDownInterval","requestAnimationFrame","drawCountDown","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","s","gotEndMatch","endMatchScores","stopDrawInterval","isGameOngoing","sendMessage","isReliable","toJson","p","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","randomFromTo","shapes","temp","shape","i","piece","valid","offsetX","offsetY","newShape","console","log","tick","freeze","clearLines","setDrawInterval","rowFilled","yy","xx","rotate","copy","intervalMillis","Math","max","drawEveryMilliseconds","floor","drawInterval","updateAndDraw","cancelAnimationFrame","drawCell","color","ctx","fillStyle","fillRect","cellWidth","cellHeight","strokeStyle","strokeRect","draw","canvasWidth","canvasHeight","font","playerColor","textBaseline","msg","toUpperCase","score","cordX","cordY","fillText","shapeColor","secondsFromStart","secondsToReallyStart","yourColor","timestamp","startTime","timelapse","keyPressed","dir","rotated","processKey","e","key","which","processTouch","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","info","id","getContext","document","addEventListener"],"mappings":"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"}