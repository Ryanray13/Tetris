{"version":3,"file":"tetris.min.js","sources":["../js/tetris.js"],"names":["angular","module","run","$rootScope","$translate","$log","realTimeService","randomService","createCanvasController","canvas","createBoard","newBoard","y","rowsNum","x","colsNum","gotStartMatch","params","isHelpModalShown","yourPlayerIndex","playersInfo","matchController","isSinglePlayer","length","isSinglePlayerGlobal","totalPauseTime","pauseStartTime","pieceCreatedNum","allScores","allBoards","index","board","createPiece","startMatchTime","Date","getTime","stopCountDownInterval","countDownInterval","requestAnimationFrame","drawCountDown","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","s","b","gotEndMatch","endMatchScores","isGameOngoing","stopDrawInterval","sendMessage","isReliable","toJson","p","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","randomFromTo","shapes","temp","shape","i","piece","valid","offsetX","offsetY","newShape","tick","freeze","clearLines","setDrawInterval","rowFilled","yy","xx","rotate","copy","intervalMillis","Math","max","drawEveryMilliseconds","floor","cancelAnimationFrame","drawInterval","drawCell","color","ctx","fillStyle","fillRect","cellWidth","cellHeight","strokeStyle","strokeRect","draw","canvasWidth","canvasHeight","font","playerColor","textBaseline","msg","toUpperCase","score","cordX","cordY","fillText","shapeColor","secondsFromStart","secondsToReallyStart","yourColor","updateAndDraw","timestamp","startTime","timelapse","keyPressed","dir","rotated","processKey","e","key","which","processTouch","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","info","id","getContext","document","addEventListener","carouselClick","carouselClose","init"],"mappings":"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"}