{"version":3,"file":"tetris.min.js","sources":["../js/tetris.js"],"names":["angular","module","run","$rootScope","$translate","$log","realTimeService","randomService","createCanvasController","canvas","init","y","rowsNum","board","x","colsNum","gotStartMatch","params","fpsmeter","window","FPSMeter","graph","theme","left","yourPlayerIndex","playersInfo","matchController","isSinglePlayer","length","isSinglePlayerGlobal","pieceCreatedNum","allScores","index","createPiece","startMatchTime","Date","getTime","stopCountDownInterval","countDownInterval","requestAnimationFrame","drawCountDown","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","s","gotEndMatch","endMatchScores","stopDrawInterval","isGameOngoing","sendMessage","isReliable","toJson","p","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","randomFromTo","shapes","temp","shape","i","piece","valid","offsetX","offsetY","newShape","tick","freeze","clearLines","setDrawInterval","rowFilled","yy","xx","rotate","copy","intervalMillis","Math","max","drawEveryMilliseconds","floor","cancelAnimationFrame","drawInterval","drawCell","color","ctx","fillStyle","fillRect","cellWidth","cellHeight","strokeStyle","strokeRect","draw","canvasWidth","canvasHeight","font","playerColor","textBaseline","msg","toUpperCase","score","cordX","cordY","fillText","shapeColor","tickStart","secondsFromStart","isHelpModalShown","pauseStartTime","totalPauseTime","secondsToReallyStart","yourColor","updateAndDraw","timestamp","startTime","timelapse","keyPressed","dir","rotated","processKey","e","key","which","processTouch","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","info","id","getContext","document","addEventListener","carouselClick","carouselClose"],"mappings":"AAAAA,QAAQC,OAAO,SAAU,UAAW,iBACjCC,KAAK,aAAc,aAAc,OAAQ,kBAAmB,gBACzD,SAAUC,EAAYC,EAAYC,EAAMC,EAAiBC,GAC/D,YAuCA,SAASC,GAAuBC,GAwC9B,QAASC,KACP,IAAK,GAAIC,GAAI,EAAOC,EAAJD,IAAeA,EAAG,CAChCE,EAAMF,KACN,KAAK,GAAIG,GAAI,EAAOC,EAAJD,IAAeA,EAC7BD,EAAMF,GAAGG,GAAK,GAOpB,QAASE,GAAcC,GACrBC,EAAW,GAAIC,QAAOC,UAAUC,OAAO,EAAMC,MAAO,OAAQC,KAAM,QAClEC,EAAkBP,EAAOO,gBACzBC,EAAcR,EAAOQ,YACrBC,EAAkBT,EAAOS,gBAEzBC,EAAwC,IAAvBF,EAAYG,OAC7BC,EAAuBF,EAEvBG,EAAkB,EAClBC,IACA,KAAK,GAAIC,GAAQ,EAAGA,EAAQP,EAAYG,OAAQI,IAC9CD,EAAUC,GAAS,CAErBtB,KACAuB,IACAC,GAAiB,GAAIC,OAAOC,UAC5BC,IACAC,EAAoBC,sBAAsBC,GAI5C,QAASC,GAAWxB,GAClB,GAAIyB,GAAkBzB,EAAOyB,gBACzBC,EAAgB1B,EAAO2B,QAEvBC,EAAgB7C,QAAQ8C,SAASH,EACrCZ,GAAUW,GAAmBG,EAAcE,EAM7C,QAASC,GAAYC,GAEnBC,IACAnB,EAAYkB,EACZE,GAAgB,EAGlB,QAASC,GAAYC,GACnB,IAAI1B,GAAmBwB,EAAvB,CAGA,GAAIR,GAAgB3C,QAAQsD,QACvBC,EAAGzB,EAAiBiB,EAAGhB,EAAUP,IAClC6B,GACF3B,EAAgB8B,oBAAoBb,GAEpCjB,EAAgB+B,sBAAsBd,IAI1C,QAASe,KACFP,IAGLA,GAAgB,EAChBzB,EAAgBiC,SAAS5B,IAI3B,QAASE,KAKP,IAAK,GAJDD,GAAQzB,EAAcqD,aAA+B,EAAlB9B,EAAqB,EAAG+B,EAAOjC,QAClEkC,EAAOD,EAAO7B,GACd+B,KAEKpD,EAAI,EAAO,EAAJA,IAASA,EAAG,CAC1BoD,EAAMpD,KACN,KAAK,GAAIG,GAAI,EAAO,EAAJA,IAASA,EAAG,CAC1B,GAAIkD,GAAI,EAAIrD,EAAIG,CAEdiD,GAAMpD,GAAGG,GADY,mBAAZgD,GAAKE,IAAsBF,EAAKE,GAC3B,EAEA,GAKpBC,EAAMF,MAAQA,EACdE,EAAMnD,EAAI,EACVmD,EAAMtD,EAAc,IAAVqB,EAAc,GAAK,EAC7BiC,EAAMjC,MAAQA,EAEdF,IAKF,QAASoC,GAAMC,EAASC,EAASC,GAC/BF,EAAUA,GAAW,EACrBC,EAAUA,GAAW,EACrBD,EAAUF,EAAMnD,EAAIqD,EACpBC,EAAUH,EAAMtD,EAAIyD,EACpBC,EAAWA,GAAYJ,EAAMF,KAG7B,KAAK,GAFD/B,GAAQiC,EAAMjC,MAETrB,EAAI,EAAO,EAAJA,IAASA,EACvB,IAAK,GAAIG,GAAI,EAAO,EAAJA,IAASA,EACvB,GAAIuD,EAAS1D,GAAGG,GAAI,CAClB,GAAkC,mBAAvBD,GAAMF,EAAIyD,IAC0B,mBAApCvD,GAAMF,EAAIyD,GAAStD,EAAIqD,GAChC,OAAO,CAEP,IAAItD,EAAMF,EAAIyD,GAAStD,EAAIqD,GAIzB,OAHc,IAAVnC,GAA2B,IAAZoC,GAA0B,IAATpC,GAA0B,IAAZoC,IAChDV,KAEK,EAMjB,OAAO,EAGT,QAASY,KACP,GAAIJ,EAAM,EAAG,KACTD,EAAMtD,MACH,CACL,IAAIwC,EACF,MAEFoB,KACAC,IACAvC,IACAoB,IAAa,EACboB,KAKJ,QAASF,KACP,IAAK,GAAI5D,GAAI,EAAO,EAAJA,IAASA,EACvB,IAAK,GAAIG,GAAI,EAAO,EAAJA,IAASA,EACnBmD,EAAMF,MAAMpD,GAAGG,KACjBD,EAAMF,EAAIsD,EAAMtD,GAAGG,EAAImD,EAAMnD,GAAKmD,EAAMF,MAAMpD,GAAGG,IAOzD,QAAS0D,KACP,IAAK,GAAI7D,GAAIC,EAAU,EAAGD,GAAK,IAAKA,EAAG,CAErC,IAAM,GADF+D,IAAY,EACN5D,EAAI,EAAOC,EAAJD,IAAeA,EAC9B,GAAoB,IAAhBD,EAAMF,GAAGG,GAAU,CACrB4D,GAAY,CACZ,OAGJ,GAAIA,EAAW,CACb3C,EAAUP,IACV,KAAK,GAAImD,GAAKhE,EAAGgE,EAAK,IAAKA,EACzB,IAAK,GAAIC,GAAK,EAAQ7D,EAAL6D,IAAgBA,EAC/B/D,EAAM8D,GAAIC,GAAM/D,EAAM8D,EAAK,GAAGC,KAGhCjE,IAMR,QAASkE,GAAOd,EAAO/B,GACrB,GAAc,IAAVA,EACF,MAAOhC,SAAQ8E,KAAKf,EAEtB,IACIjD,GAAGH,EADH0D,IAEJ,IAAc,IAAVrC,EACF,IAAKrB,EAAI,EAAO,EAAJA,IAASA,EAEnB,IADA0D,EAAS1D,MACJG,EAAI,EAAO,EAAJA,IAASA,EACnBuD,EAAS1D,GAAGG,GAAKiD,EAAM,EAAIjD,GAAGH,OAIlC,KAAKA,EAAI,EAAO,EAAJA,IAASA,EAEnB,IADA0D,EAAS1D,MACJG,EAAI,EAAO,EAAJA,IAASA,EACnBuD,EAAS1D,GAAGG,GAAKiD,EAAM,EAAIjD,GAAGH,EAIpC,OAAO0D,GAUT,QAASI,KAGPM,GAAiBC,KAAKC,IAAI,IAAKC,EAAwB,GAAKF,KAAKG,MAAMrD,EAAkB,KAI3F,QAASoB,KACPkC,qBAAqBC,GAIvB,QAAShD,KACP+C,qBAAqB9C,GAIvB,QAASgD,GAASxE,EAAGH,EAAG4E,GACtBC,EAAIC,UAAYF,EAChBC,EAAIE,SAAS5E,EAAE6E,EAAWhF,EAAEiF,EAAYD,EAAU,EAAGC,EAAW,GAChEJ,EAAIK,YAAc,QAClBL,EAAIM,WAAWhF,EAAE6E,EAAWhF,EAAEiF,EAAYD,EAAU,EAAGC,EAAW,GAGpE,QAASG,KAEPP,EAAIC,UAAY,QAChBD,EAAIE,SAAS,EAAG,EAAGM,EAAaC,GAChCT,EAAIK,YAAc,QAClBL,EAAIM,WAAW,EAAG,EAAGE,EAAaC,EAGlC,KAAK,GAAIjC,GAAI,EAAGA,EAAIjC,EAAUH,OAAQoC,IAAK,CACzCwB,EAAIU,KAAO,iBACX,IAAIX,GAAQY,EAAYnC,EACxBwB,GAAIC,UAAYF,EAChBC,EAAIY,aAAe,KACnB,IAAIC,GAAMjG,EAAW,kBAChBmF,MAAOnF,EAAWmF,EAAMe,eAAgBC,MAAO,GAAKxE,EAAUiC,KAC/DwC,EAAQ,EAAIxC,EAAI,EAAIgC,GAAevE,EAAYG,OAAS,EAAI,EAAIH,EAAYG,QAC5E6E,EAAQ,EAAwB,GAApBzB,KAAKG,MAAMnB,EAAI,EAC/BwB,GAAIkB,SAASL,EAAKG,EAAOC,GAG3B,GAAI3F,GAAGH,CAEP,KAAKG,EAAI,EAAOC,EAAJD,IAAeA,EACzB,IAAKH,EAAI,EAAOC,EAAJD,IAAeA,EACrBE,EAAMF,GAAGG,IACXwE,EAASxE,EAAGH,EAAGwF,EAAY3E,GAMjC,KAAKb,EAAI,EAAO,EAAJA,IAASA,EACnB,IAAKG,EAAI,EAAO,EAAJA,IAASA,EACfmD,EAAMF,MAAMpD,GAAGG,IACjBwE,EAASrB,EAAMnD,EAAIA,EAAGmD,EAAMtD,EAAIA,EAAGgG,EAAW1C,EAAMjC,QAO5D,QAASQ,KACPtB,EAAS0F,WACT,IAAIC,GAAmB,CAMvB,IAJEA,EAAmB7B,KAAKG,MADtBhF,EAAW2G,kBACkBC,EAAiBC,EAAiB9E,GAAkB,MAEpD,GAAIC,OAAOC,UAAY4E,EAAiB9E,GAAkB,KAEpE,EAAnB2E,EAAsB,CAExBd,GAEA,IAAIkB,GAAuB,EAAIJ,EAG3BK,EAAYf,EAAY3E,EAC5BgE,GAAIC,UAAYyB,EAChB1B,EAAIU,KAAO,kBACXV,EAAIkB,SAAS,GAAKO,EAAsBjB,EAAc,EAAGC,EAAe,GAExET,EAAIU,KAAO,iBACX,IAAIG,GAAMjG,EAAW,uBACrBoF,GAAIkB,SAASL,EAAK,GAAIJ,EAAe,EAAI,IACzCI,EAAMjG,EAAW,cACZmF,MAAOnF,EAAW8G,EAAUZ,iBACjCd,EAAIkB,SAASL,EAAKL,EAAc,EAAI,GAAKC,EAAe,EAAI,GAC5D/E,EAASoD,OACThC,EAAqBC,sBAAsBC,OAE3CW,IAAgB,EAChBd,IACAoC,IACAY,EAAe9C,sBAAsB4E,GAMzC,QAASA,GAAcC,GAErB,GADAlG,EAAS0F,YACJzD,EAAL,CAGgB,EAAZkE,KACFA,GAAYD,EAGd,IAAIE,GAAYF,EAAYC,EAC5BhE,KAAa,EACTiE,GAAavC,KACfsC,GAAYD,EACPjH,EAAW2G,kBACdxC,KAGJlB,EAAYC,IACZ0C,IACA7E,EAASoD,OACTe,EAAe9C,sBAAsB4E,IAIvC,QAASI,GAAWC,GAClB,OAAQA,GACN,IAAK,OACCtD,EAAM,OACND,EAAMnD,CAEV,MACF,KAAK,QACCoD,EAAM,MACND,EAAMnD,CAEV,MACF,KAAK,OACCoD,EAAM,EAAG,MACTD,EAAMtD,CAEV,MACF,KAAK,KACH,GAAI8G,GAAU5C,EAAOZ,EAAMF,MAAOE,EAAMjC,MACpCkC,GAAM,EAAG,EAAGuD,KACdxD,EAAMF,MAAQ0D,IAOtB,QAASC,GAAWC,GAClB,GAAIC,GAAMD,EAAEE,MACRL,EAAc,KAARI,EAAa,OACT,KAARA,EAAa,KACL,KAARA,EAAa,QACL,KAARA,EAAa,OAAS,IAChB,QAARJ,GAAgBrE,IAClBoE,EAAWC,GACXzB,KAMJ,QAAS+B,GAAaH,GACpB,GAAKxE,EAAL,CAGAwE,EAAEI,gBACF,IAAIC,GAAWL,EAAEM,cAAc,EAC/B,IAAKD,EAAL,CAGA,GAAc,OAAVE,GAGF,MAFAA,IAAQF,EAASG,WACjBC,GAAQJ,EAASK,MAGnB,IAAIC,GAAQN,EAASG,MAAQD,GACzBK,EAAQP,EAASK,MAAQD,GACzBI,EAAW,KACXC,EAAWzD,KAAK0D,IAAIJ,GACpBK,EAAW3D,KAAK0D,IAAIH,IACpBE,GAAY,IAAME,GAAY,MAChCT,GAAQF,EAASG,MACjBC,GAAQJ,EAASK,MAEfG,EADEC,EAAWE,EACM,EAARL,EAAY,OAAS,QAEb,EAARC,EAAY,KAAO,OAEhChB,EAAWiB,GACXzC,OA3bJ1F,EAAKuI,KAAK,wCAA0CnI,EAAOoI,GAC3D,IAQI9G,GACAD,EAyBAI,EAEAhB,EAWAoB,EAmMA+C,EAlPAlC,GAAgB,EAChBxB,GAAiB,EACjBF,EAAc,KACdD,EAAkB,KAClBE,EAAkB,KAMlBb,KAEAoD,KAIAJ,IAAa,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,IACT,EAAG,EAAG,EAAG,EACT,IACA,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,IACN,EAAG,EAAG,EAAG,EACT,EAAG,IACH,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,IACN,EAAG,EAAG,EAAG,EACT,EAAG,IACH,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,IAEnB8C,GACF,OAAQ,SAAU,OAAQ,SAAU,MAAO,QAAS,UAgNlDnB,EAAM/E,EAAOqI,WAAW,MAGxBzB,GAAY,GACZtC,GAAiBG,CAYrB/E,GAAW+C,iBAAmBA,CA2F9B,IAAIG,KAAa,CAwBjBlD,GAAWgH,cAAgBA,EAwC3B4B,SAASC,iBAAiB,UAAWtB,GAAY,EAEjD,IAAIQ,IAAQ,KAAME,GAAQ,IA4C1B,OAZA3H,GAAOuI,iBAAiB,aAAc,SAASrB,GAC7CO,GAAQ,KACRE,GAAQ,KACRN,EAAaH,KACZ,GACHlH,EAAOuI,iBAAiB,YAAa,SAASrB,GAC5CG,EAAaH,KACZ,GACHlH,EAAOuI,iBAAiB,WAAY,SAASrB,GAC3CG,EAAaH,KACZ,IAGD3G,cAAeA,EACfyB,WAAYA,EACZO,YAAaA,GAlfjB,GAAIgD,GAAc,IACdC,EAAe,IAGfN,EAAY,GACZC,EAAa,GACb7E,EAAUiF,EAAcL,EACxB/E,EAAUqF,EAAeL,EACzBV,EAAwB,GAE5B/E,GAAW2G,kBAAmB,CAC9B,IAAIjF,IAAuB,EACvBmF,EAAiB,EACjBD,EAAiB,CAErB5G,GAAW8I,cAAgB,WACrBpH,IACF1B,EAAW2G,kBAAmB,EAC9BC,GAAiB,GAAI5E,OAAOC,YAIhCjC,EAAW+I,cAAgB,WACzB/I,EAAW2G,kBAAmB,EAC9BE,IAAkB,GAAI7E,OAAOC,UAAY2E,EAO3C,IAAIZ,IACF,OAAQ,MAAO,QAAS,SACxB,OAAQ,SAAU,SAAU,SAqd9B7F,GAAgBI,MACdF,uBAAwBA,EACxBwF,YAAaA,EACbC,aAAcA"}