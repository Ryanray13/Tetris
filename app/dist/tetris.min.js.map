{"version":3,"file":"tetris.min.js","sources":["../js/tetris.js"],"names":["angular","module","run","$rootScope","$translate","$log","realTimeService","randomService","createCanvasController","canvas","createBoard","newBoard","y","rowsNum","x","colsNum","gotStartMatch","params","fpsmeter","window","FPSMeter","graph","theme","left","yourPlayerIndex","playersInfo","matchController","isSinglePlayer","length","isSinglePlayerGlobal","pieceCreatedNum","allScores","allBoards","index","board","createPiece","startMatchTime","Date","getTime","stopCountDownInterval","countDownInterval","requestAnimationFrame","drawCountDown","gotMessage","fromPlayerIndex","messageString","message","messageObject","fromJson","s","b","gotEndMatch","endMatchScores","stopDrawInterval","isGameOngoing","sendMessage","isReliable","toJson","p","sendReliableMessage","sendUnreliableMessage","lostMatch","endMatch","randomFromTo","shapes","temp","shape","i","piece","valid","offsetX","offsetY","newShape","tick","freeze","clearLines","setDrawInterval","rowFilled","yy","xx","rotate","copy","intervalMillis","Math","max","drawEveryMilliseconds","floor","cancelAnimationFrame","drawInterval","drawCell","color","ctx","fillStyle","fillRect","cellWidth","cellHeight","strokeStyle","strokeRect","draw","canvasWidth","canvasHeight","font","playerColor","textBaseline","msg","toUpperCase","score","cordX","cordY","fillText","shapeColor","tickStart","secondsFromStart","isHelpModalShown","pauseStartTime","totalPauseTime","secondsToReallyStart","yourColor","updateAndDraw","timestamp","startTime","timelapse","keyPressed","dir","rotated","processKey","e","key","which","processTouch","preventDefault","touchobj","targetTouches","lastX","pageX","lastY","pageY","distX","distY","swipedir","absDistX","abs","absDistY","info","id","getContext","document","addEventListener","carouselClick","carouselClose","init"],"mappings":"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"}